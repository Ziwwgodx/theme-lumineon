{% comment %}
  Section Testimonials - T√©moignages clients
{% endcomment %}

<section id="testimonials" class="py-20 lg:py-32 relative overflow-hidden section-transition">
  <!-- Background -->
  <div class="absolute inset-0 bg-gradient-to-b from-gray-800 via-gray-900 to-gray-800"></div>
  <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-yellow-400 to-transparent opacity-50"></div>

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-16">
      <!-- Badge social proof -->
      <div class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-full text-green-300 mb-6">
        <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
        </svg>
        <span class="font-semibold">{{ section.settings.badge_text | default: '4.8/5 ‚≠ê ‚Ä¢ 127+ AVIS V√âRIFI√âS' }}</span>
      </div>
      
      <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6">
        <span class="neon-text-yellow">{{ section.settings.title_line_1 | default: 'Ils Nous Font' }}</span>
        <br />
        <span class="neon-text-green">{{ section.settings.title_line_2 | default: 'Confiance' }}</span>
      </h2>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
        {{ section.settings.description | default: 'üí¨ D√©couvrez pourquoi 98% de nos clients nous recommandent. Leurs t√©moignages authentiques sont votre meilleure garantie de qualit√©.' }}
      </p>
      
      <!-- Trust Indicators -->
      <div class="mt-8 flex flex-wrap justify-center gap-4">
        {% for block in section.blocks %}
          {% if block.type == 'trust_indicator' %}
            <div class="flex items-center gap-2 px-4 py-2 bg-{{ block.settings.color }}-500/20 border border-{{ block.settings.color }}-500/30 rounded-full text-{{ block.settings.color }}-300">
              {% if block.settings.show_star %}
                <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              {% endif %}
              <span class="font-medium">{{ block.settings.text }}</span>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <!-- Testimonials Carousel -->
    <div class="relative">
      <!-- Navigation Buttons -->
      <button
        onclick="scrollTestimonials('left')"
        class="absolute left-0 top-1/2 transform -translate-y-1/2 z-10 w-12 h-12 bg-gray-800/90 hover:bg-gray-700 border border-gray-600 hover:border-yellow-500/50 rounded-full flex items-center justify-center text-gray-400 hover:text-yellow-400 transition-all duration-300 backdrop-blur-sm"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>
      
      <button
        onclick="scrollTestimonials('right')"
        class="absolute right-0 top-1/2 transform -translate-y-1/2 z-10 w-12 h-12 bg-gray-800/90 hover:bg-gray-700 border border-gray-600 hover:border-yellow-500/50 rounded-full flex items-center justify-center text-gray-400 hover:text-yellow-400 transition-all duration-300 backdrop-blur-sm"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>

      <!-- Scrollable Container -->
      <div
        id="testimonials-container"
        class="flex gap-6 overflow-x-auto scrollbar-hide pb-4"
        style="scrollbar-width: none; -ms-overflow-style: none;"
      >
        {% for block in section.blocks %}
          {% if block.type == 'testimonial' %}
            <div class="flex-shrink-0 w-80 group">
              <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 border border-gray-700 transition-all duration-500 hover:border-yellow-500/50 hover:shadow-2xl hover:shadow-yellow-500/30 h-full relative transform hover:scale-105">
                <!-- Quote Icon -->
                <div class="absolute top-4 right-4 text-yellow-400/30">
                  <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h4v10h-10z"/>
                  </svg>
                </div>

                <!-- Verified Badge Premium -->
                <div class="absolute top-4 left-4 px-2 py-1 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full text-white text-xs font-bold flex items-center gap-1">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  V√âRIFI√â
                </div>

                <!-- Content -->
                <div class="relative z-10">
                  <!-- Stars and Verified Badge -->
                  <div class="flex items-center justify-between mb-4 mt-8">
                    <div class="flex gap-1">
                      {% assign rating = block.settings.rating | default: 5 %}
                      {% for i in (1..5) %}
                        <svg class="w-4 h-4 {% if i <= rating %}text-yellow-400 fill-current{% else %}text-gray-600{% endif %}" viewBox="0 0 20 20">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                      {% endfor %}
                    </div>
                    <div class="text-gray-500 text-xs">
                      {{ block.settings.date }}
                    </div>
                  </div>

                  <!-- Testimonial Text -->
                  <p class="text-gray-300 text-sm leading-relaxed mb-6 line-clamp-4">
                    "{{ block.settings.content }}"
                  </p>

                  <!-- Author Info -->
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-yellow-400/50 flex-shrink-0 shadow-lg">
                      {% if block.settings.author_image %}
                        <img
                          src="{{ block.settings.author_image | img_url: '80x80' }}"
                          alt="{{ block.settings.author_name }}"
                          class="w-full h-full object-cover"
                        />
                      {% else %}
                        <div class="w-full h-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-white font-bold text-sm">
                          {{ block.settings.author_name | slice: 0 }}
                        </div>
                      {% endif %}
                    </div>
                    <div class="flex-1 min-w-0">
                      <h4 class="text-white font-bold text-sm group-hover:text-yellow-400 transition-colors duration-300 truncate">
                        {{ block.settings.author_name }}
                      </h4>
                      <p class="text-gray-400 text-xs truncate mb-1">
                        {{ block.settings.author_role }}
                      </p>
                      <div class="flex items-center gap-1">
                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                        <span class="text-green-400 text-xs font-medium">Client v√©rifi√©</span>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Social Proof -->
                  <div class="mt-4 pt-4 border-t border-gray-700/50">
                    <div class="flex items-center justify-between text-xs text-gray-500">
                      <div class="flex items-center gap-1">
                        <span>‚ù§Ô∏è</span>
                        <span>{{ 5 | plus: forloop.index | times: 3 }} personnes ont trouv√© cet avis utile</span>
                      </div>
                      <div class="flex items-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                        </svg>
                        <span>Partager</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <!-- Stats Section -->
    <div class="bg-gradient-to-r from-gray-800/50 to-gray-900/50 rounded-3xl p-8 lg:p-12 border border-gray-700 mt-16">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 text-center">
        {% for block in section.blocks %}
          {% if block.type == 'stat' %}
            <div class="group">
              <div class="text-4xl lg:text-5xl font-bold neon-text-{{ block.settings.color }} mb-2 group-hover:scale-110 transition-transform duration-300">
                {{ block.settings.number }}
              </div>
              <div class="text-gray-400">{{ block.settings.label }}</div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <!-- CTA -->
    <div class="text-center mt-12">
      <p class="text-gray-300 mb-6 text-lg">
        {{ section.settings.cta_text | default: 'Rejoignez nos clients satisfaits et illuminez votre success story' }}
      </p>
      <button
        onclick="openDevisPopup()"
        class="px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full text-white font-semibold text-lg transition-all duration-300 hover:scale-105 hover:shadow-neon-yellow"
      >
        {{ section.settings.cta_button | default: 'Commencer Mon Projet' }}
      </button>
    </div>
  </div>
</section>

<script>
function scrollTestimonials(direction) {
  const container = document.getElementById('testimonials-container');
  if (!container) return;
  
  const scrollAmount = 350;
  
  if (direction === 'left') {
    container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
  } else {
    container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  }
}

// Auto-scroll effect
document.addEventListener('DOMContentLoaded', function() {
  const container = document.getElementById('testimonials-container');
  if (!container) return;

  const autoScroll = () => {
    const maxScroll = container.scrollWidth - container.clientWidth;
    if (container.scrollLeft >= maxScroll) {
      container.scrollTo({ left: 0, behavior: 'smooth' });
    } else {
      container.scrollBy({ left: 1, behavior: 'auto' });
    }
  };

  const interval = setInterval(autoScroll, 50);
  
  // Pause on hover
  container.addEventListener('mouseenter', () => clearInterval(interval));
});

// Open devis popup
function openDevisPopup() {
  if (typeof window.openDevisPopup === 'function') {
    window.openDevisPopup();
  } else {
    alert('üé® Contactez-nous pour cr√©er votre n√©on personnalis√© !\nüìû +33 1 23 45 67 89\nüìß contact@lumineon.fr');
  }
}
</script>

<style>
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.line-clamp-4 {
  display: -webkit-box;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>

{% schema %}
{
  "name": "Testimonials Section",
  "settings": [
    {
      "type": "text",
      "id": "badge_text",
      "label": "Texte du badge",
      "default": "4.8/5 ‚≠ê ‚Ä¢ 127+ AVIS V√âRIFI√âS"
    },
    {
      "type": "text",
      "id": "title_line_1",
      "label": "Titre ligne 1",
      "default": "Ils Nous Font"
    },
    {
      "type": "text",
      "id": "title_line_2",
      "label": "Titre ligne 2",
      "default": "Confiance"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "üí¨ D√©couvrez pourquoi 98% de nos clients nous recommandent. Leurs t√©moignages authentiques sont votre meilleure garantie de qualit√©."
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Texte CTA",
      "default": "Rejoignez nos clients satisfaits et illuminez votre success story"
    },
    {
      "type": "text",
      "id": "cta_button",
      "label": "Bouton CTA",
      "default": "Commencer Mon Projet"
    }
  ],
  "blocks": [
    {
      "type": "trust_indicator",
      "name": "Indicateur de confiance",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Texte"
        },
        {
          "type": "select",
          "id": "color",
          "label": "Couleur",
          "options": [
            {"value": "green", "label": "Vert"},
            {"value": "blue", "label": "Bleu"},
            {"value": "purple", "label": "Violet"},
            {"value": "yellow", "label": "Jaune"}
          ],
          "default": "green"
        },
        {
          "type": "checkbox",
          "id": "show_star",
          "label": "Afficher √©toile",
          "default": false
        }
      ]
    },
    {
      "type": "testimonial",
      "name": "T√©moignage",
      "settings": [
        {
          "type": "text",
          "id": "author_name",
          "label": "Nom de l'auteur"
        },
        {
          "type": "text",
          "id": "author_role",
          "label": "R√¥le de l'auteur"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Photo de l'auteur"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Contenu du t√©moignage"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Note (√©toiles)",
          "default": 5
        },
        {
          "type": "text",
          "id": "date",
          "label": "Date",
          "default": "Il y a 1 semaine"
        }
      ]
    },
    {
      "type": "stat",
      "name": "Statistique",
      "settings": [
        {
          "type": "text",
          "id": "number",
          "label": "Nombre"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Libell√©"
        },
        {
          "type": "select",
          "id": "color",
          "label": "Couleur n√©on",
          "options": [
            {"value": "yellow", "label": "Jaune"},
            {"value": "cyan", "label": "Cyan"},
            {"value": "purple", "label": "Violet"},
            {"value": "pink", "label": "Rose"}
          ],
          "default": "yellow"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials Section",
      "category": "Custom",
      "blocks": [
        {
          "type": "trust_indicator",
          "settings": {
            "text": "Google Reviews",
            "color": "green",
            "show_star": true
          }
        },
        {
          "type": "trust_indicator",
          "settings": {
            "text": "Trustpilot Excellent",
            "color": "blue",
            "show_star": false
          }
        },
        {
          "type": "trust_indicator",
          "settings": {
            "text": "Facebook 5‚òÖ",
            "color": "purple",
            "show_star": false
          }
        },
        {
          "type": "trust_indicator",
          "settings": {
            "text": "98% Recommandent",
            "color": "yellow",
            "show_star": false
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "author_name": "Sophie Martin",
            "author_role": "Propri√©taire Restaurant Le Gourmet",
            "content": "LumiN√©on a transform√© notre fa√ßade ! Le n√©on personnalis√© attire l'≈ìil de tous les passants. L'√©quipe est professionnelle et le r√©sultat d√©passe nos attentes.",
            "rating": 5,
            "date": "Il y a 2 semaines"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "author_name": "Marc Dubois",
            "author_role": "G√©rant Bar √† Cocktails Neon",
            "content": "Installation parfaite, design unique et service client exceptionnel. Nos clients adorent l'ambiance cr√©√©e par nos n√©ons sur mesure. Je recommande vivement !",
            "rating": 5,
            "date": "Il y a 1 mois"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "author_name": "√âlodie Bernard",
            "author_role": "Directrice Salon Beauty Glow",
            "content": "Un travail d'artiste ! L'√©quipe LumiN√©on a su capter l'essence de notre marque et la retranscrire en lumi√®re. Nos clientes sont s√©duites par cette atmosph√®re unique.",
            "rating": 5,
            "date": "Il y a 3 semaines"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "author_name": "Thomas Legrand",
            "author_role": "Fondateur Startup TechVibe",
            "content": "LumiN√©on a donn√© une √¢me √† nos bureaux. Le n√©on corporate qu'ils ont cr√©√© refl√®te parfaitement notre esprit innovant. Qualit√© et cr√©ativit√© au rendez-vous !",
            "rating": 5,
            "date": "Il y a 1 semaine"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "author_name": "Camille Rousseau",
            "author_role": "Organisatrice √âv√©nements Luxe",
            "content": "Pour notre mariage, nous voulions quelque chose d'unique. Le n√©on 'Mr & Mrs' cr√©√© par LumiN√©on √©tait absolument magique ! Tous nos invit√©s ont √©t√© √©blouis.",
            "rating": 5,
            "date": "Il y a 5 jours"
          }
        },
        {
          "type": "stat",
          "settings": {
            "number": "98%",
            "label": "Satisfaction Client",
            "color": "yellow"
          }
        },
        {
          "type": "stat",
          "settings": {
            "number": "500+",
            "label": "Projets R√©alis√©s",
            "color": "cyan"
          }
        },
        {
          "type": "stat",
          "settings": {
            "number": "127+",
            "label": "Avis Google",
            "color": "purple"
          }
        },
        {
          "type": "stat",
          "settings": {
            "number": "4.8‚òÖ",
            "label": "Note Moyenne",
            "color": "pink"
          }
        }
      ],
      "settings": {
        "badge_text": "4.8/5 ‚≠ê ‚Ä¢ 127+ AVIS V√âRIFI√âS",
        "title_line_1": "Ils Nous Font",
        "title_line_2": "Confiance",
        "description": "üí¨ D√©couvrez pourquoi 98% de nos clients nous recommandent. Leurs t√©moignages authentiques sont votre meilleure garantie de qualit√©.",
        "cta_text": "Rejoignez nos clients satisfaits et illuminez votre success story",
        "cta_button": "Commencer Mon Projet"
      }
    }
  ]
}
{% endschema %}