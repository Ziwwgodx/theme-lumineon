{% comment %}
  Template Collection - Page collection avec SEO optimis√©
{% endcomment %}

{% assign page_title = collection.title | append: ' - N√©ons LED Personnalis√©s | LumiN√©on' %}
{% assign page_description = collection.description | strip_html | truncate: 155 | default: 'Collection de n√©ons LED personnalis√©s ' | append: collection.title | append: '. Fabrication fran√ßaise haut de gamme, garantie 2 ans, livraison express France enti√®re.' %}

<!-- SEO Schema Organization -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "{{ collection.title | escape }}",
  "description": "{{ page_description | escape }}",
  "url": "{{ shop.url }}{{ collection.url }}",
  "mainEntity": {
    "@type": "ItemList",
    "name": "{{ collection.title | escape }}",
    "description": "{{ collection.description | strip_html | escape }}",
    "numberOfItems": {{ collection.products_count }},
    "itemListElement": [
      {% for product in collection.products limit: 10 %}
        {
          "@type": "Product",
          "position": {{ forloop.index }},
          "name": "{{ product.title | escape }}",
          "description": "{{ product.description | strip_html | truncate: 155 | escape }}",
          "image": "{{ product.featured_image | img_url: 'master' }}",
          "url": "{{ shop.url }}{{ product.url }}",
          "brand": {
            "@type": "Brand",
            "name": "LumiN√©on"
          },
          "offers": {
            "@type": "Offer",
            "price": "{{ product.price | money_without_currency }}",
            "priceCurrency": "{{ cart.currency.iso_code }}",
            "availability": "{% if product.available %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}",
            "seller": {
              "@type": "Organization",
              "name": "LumiN√©on"
            }
          },
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "127"
          }
        }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  },
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Accueil",
        "item": "{{ shop.url }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ collection.title | escape }}",
        "item": "{{ shop.url }}{{ collection.url }}"
      }
    ]
  },
  "provider": {
    "@type": "Organization",
    "name": "LumiN√©on",
    "url": "{{ shop.url }}",
    "logo": "{{ 'logo.png' | asset_url }}",
    "sameAs": [
      "https://www.facebook.com/lumineonshop",
      "https://www.instagram.com/lumineonshop"
    ]
  }
}
</script>

<!-- FAQ Schema for Collection -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Quels types de n√©ons LED proposez-vous ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Nous proposons une large gamme de n√©ons LED personnalis√©s : enseignes commerciales, d√©coration int√©rieure, logos d'entreprise, textes personnalis√©s, formes sur mesure, n√©ons √©v√©nementiels. Tous nos n√©ons sont fabriqu√©s en France avec une garantie 2 ans."
      }
    },
    {
      "@type": "Question",
      "name": "Quel est le d√©lai de livraison pour les n√©ons de cette collection ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Les n√©ons de notre collection sont livr√©s sous 7 √† 12 jours ouvr√©s pour la fabrication, suivis de 2 √† 3 jours pour la livraison express partout en France. Chaque commande inclut un suivi en temps r√©el."
      }
    },
    {
      "@type": "Question",
      "name": "Puis-je personnaliser les n√©ons de cette collection ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolument ! Tous nos n√©ons peuvent √™tre personnalis√©s selon vos besoins : couleurs, dimensions, texte, effets lumineux. Utilisez notre customizer 3D gratuit ou demandez un devis personnalis√© pour votre projet unique."
      }
    }
  ]
}
</script>

<div class="min-h-screen bg-gray-900 text-white">
  <!-- Collection Banner -->
  {% section 'collection-banner' %}
  
  <!-- Products Grid -->
  {% section 'product-grid' %}
  
  <!-- Trust Section -->
  <section class="py-16 bg-gradient-to-r from-gray-800/50 to-gray-900/50 border-t border-gray-700">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-4 gap-8 text-center">
        <div class="group">
          <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-white mb-2">Garantie 2 Ans</h3>
          <p class="text-gray-400 text-sm">Pi√®ces et main d'≈ìuvre incluses</p>
        </div>
        
        <div class="group">
          <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-white mb-2">Livraison Express</h3>
          <p class="text-gray-400 text-sm">2-3 jours partout en France</p>
        </div>
        
        <div class="group">
          <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-white mb-2">Made in France</h3>
          <p class="text-gray-400 text-sm">Fabrication artisanale fran√ßaise</p>
        </div>
        
        <div class="group">
          <div class="w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2.25a9.75 9.75 0 100 19.5 9.75 9.75 0 000-19.5z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-white mb-2">Support 24/7</h3>
          <p class="text-gray-400 text-sm">Assistance technique experte</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Newsletter Section -->
  <section class="py-16 bg-gradient-to-r from-gray-800 to-gray-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h3 class="text-3xl font-bold mb-4 neon-text-gradient">
        üìß Restez Inform√© de Nos Nouveaut√©s
      </h3>
      <p class="text-gray-300 mb-8 text-lg">
        Recevez en avant-premi√®re nos nouvelles collections et offres exclusives
      </p>
      
      <form class="max-w-md mx-auto flex gap-4" action="/contact" method="post">
        <input type="hidden" name="form_type" value="customer">
        <input type="hidden" name="utf8" value="‚úì">
        <input 
          type="email" 
          name="contact[email]"
          placeholder="Votre email..." 
          class="flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-cyan-400 focus:outline-none transition-all duration-300"
          required
        />
        <button 
          type="submit"
          class="px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg text-white font-semibold transition-all duration-300 hover:scale-105 hover:shadow-neon-cyan"
        >
          S'abonner
        </button>
      </form>
      
      <p class="text-xs text-gray-500 mt-4">
        üîí Vos donn√©es sont prot√©g√©es. D√©sabonnement possible √† tout moment.
      </p>
    </div>
  </section>
</div>

<!-- SEO Meta Tags -->
<script>
document.title = '{{ page_title }}';
if (document.querySelector('meta[name="description"]')) {
  document.querySelector('meta[name="description"]').setAttribute('content', '{{ page_description }}');
}

// Add canonical URL
if (!document.querySelector('link[rel="canonical"]')) {
  const canonical = document.createElement('link');
  canonical.rel = 'canonical';
  canonical.href = '{{ shop.url }}{{ collection.url }}';
  document.head.appendChild(canonical);
}

// Add Open Graph tags
const ogTags = [
  { property: 'og:title', content: '{{ page_title }}' },
  { property: 'og:description', content: '{{ page_description }}' },
  { property: 'og:type', content: 'website' },
  { property: 'og:url', content: '{{ shop.url }}{{ collection.url }}' },
  { property: 'og:image', content: '{{ collection.image | default: 'og-image.jpg' | img_url: '1200x630' }}' }
];

ogTags.forEach(tag => {
  if (!document.querySelector(`meta[property="${tag.property}"]`)) {
    const meta = document.createElement('meta');
    meta.setAttribute('property', tag.property);
    meta.setAttribute('content', tag.content);
    document.head.appendChild(meta);
  }
});

// Add Twitter Card tags
const twitterTags = [
  { name: 'twitter:card', content: 'summary_large_image' },
  { name: 'twitter:title', content: '{{ page_title }}' },
  { name: 'twitter:description', content: '{{ page_description }}' },
  { name: 'twitter:image', content: '{{ collection.image | default: 'og-image.jpg' | img_url: '1200x630' }}' }
];

twitterTags.forEach(tag => {
  if (!document.querySelector(`meta[name="${tag.name}"]`)) {
    const meta = document.createElement('meta');
    meta.setAttribute('name', tag.name);
    meta.setAttribute('content', tag.content);
    document.head.appendChild(meta);
  }
});
</script>